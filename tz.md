# **Техническое задание (ТЗ) на разработку алгоритма нормализации брендов в транскрибированных диалогах**

---

## **1\. Назначение и цель проекта**

Цель проекта — разработать и внедрить алгоритм, который автоматически распознаёт и нормализует упоминания брендов в текстах транскрибированных диалогов (например, телефонных звонков или чатов), заменяя ошибочные или частично распознанные варианты на корректные наименования из эталонного справочника брендов.

Решение должно повысить точность аналитики по брендам, улучшить статистику и снизить ручной труд по корректировке распознанных данных.

---

## **2\. Исходные данные**

### **2.1. Входные данные**

**Транскрибированные диалоги**  
 [Python dev. Исходные данные для ТЗ нормализации брендов](https://docs.google.com/spreadsheets/d/13vqN61eqJRiLUNAG8CA0LyRCFrXJ2j16TCb_AP5v1dc/edit?usp=sharing) \- Лист 1  
В столбце **dialog\_gpt\_summary** \- референсные значения брендов в диалоге (получены с помощью GPT 5, могут быть ошибки)

**Справочник брендов (эталон)**  
 Там же на 2ом листе **Нормализованные значения брендов**  
---

## **3\. Функциональные требования**

### **3.1. Основные функции**

1. **Автоматическое выявление упоминаний брендов**

   * Учитывать опечатки, транслитерации, сокращения, смешанные варианты написаний.

   * Поддерживать контекстную фильтрацию (например, “керхер” → “Karcher”, но не “керосин”).

2. **Нормализация найденных брендов**

   * Каждое найденное упоминание заменяется на эталонное значение `brand_name` из справочника.

**Формирование детализированного результата**  
 Формат: `CSV` или `JSON`  
 Поля результата:

 dialog\_id | original\_text | detected\_brand | normalized\_brand | confidence

3. **Формирование отчета**, включающего:

   * итоговые метрики `Precision`, `Recall`, `F1`;

   * **топ-10 брендов с наихудшими показателями Precision** (ошибочные замены).

4. **Настраиваемые параметры чувствительности**

   * желательно.

5. Использование LLM-модели openai/gpt-oss-120b на финальном этапе алгоритма.

---

## **4\. Нефункциональные требования**

1. **Производительность:**  
    Желательно \- обработка одного диалога в пределах 20 сек.

2. **Контейнеризация:**  
    Решение должно быть поставлено в одном из двух форматов:

   * Python-скрипт `brand_normalizer.py` с инструкцией запуска;

   * Docker-контейнер.

---

## **7\. Проверка и валидация результата**

1. Взять исходные данные.

2. Запустить алгоритм и вычислить метрики Precision, Recall, F1.

3. Сформировать отчеты:

   * `metrics.json` — агрегированные метрики

   * `low_precision_brands.csv` — бренды с низким Precision

   * [report\_streamlined\_workflow.xlsx](https://docs.google.com/spreadsheets/d/1LaxUo3S3aCn5K6h7bwWp-NHNWLIbEKZ2/edit?usp=sharing&ouid=104183621208606864996&rtpof=true&sd=true) \- отчет такого формата, в котором можно будет посмотреть, “в какую сторону” есть расхождения

**Задача считается выполненной при F1 \> 0,4.**

---

## **8\. Форматы выдачи результата**

**Выходные файлы:**

`result.json` — детализированные замены по каждому диалогу

 \[  
  {  
    "dialog\_id": "12345",  
    "original\_text": "Здравствуйте, я хотел узнать про кёрхер мойку",  
    "detected\_brand": "кёрхер",  
    "normalized\_brand": "Karcher",  
    "confidence": 0.92  
  }  
\]  
Лучше в csv-виде.

1.   
2. `metrics.json` — агрегированные показатели Precision, Recall, F1

3. `low_precision_brands.csv` — список брендов с низким Precision  
4. [report\_streamlined\_workflow.xlsx](https://docs.google.com/spreadsheets/d/1LaxUo3S3aCn5K6h7bwWp-NHNWLIbEKZ2/edit?usp=sharing&ouid=104183621208606864996&rtpof=true&sd=true) \- отчет такого формата, в котором можно будет посмотреть, “в какую сторону” есть расхождения

---

## **10\. Ожидаемые результаты**

1. Готовый **Python-скрипт** `brand_normalizer.py` и/или **Docker-образ** `brand-normalizer:latest` с инструкцией по запуску.

2. Набор выходных файлов:

   * `result.json` — замены брендов по диалогам;

   * `metrics.json` — агрегированные метрики;

   * отчет формата [report\_streamlined\_workflow.xlsx](https://docs.google.com/spreadsheets/d/1LaxUo3S3aCn5K6h7bwWp-NHNWLIbEKZ2/edit?usp=sharing&ouid=104183621208606864996&rtpof=true&sd=true)

   * `low_precision_brands.csv` — топ-бренды с ошибками;

   * `charts/low_precision_brands.png` (опционально).

3. Готовый **Python-скрипт,** рассчитывающий агрегированные метрики.  
4. Отчет с примерами типичных ошибок и рекомендациями по улучшению алгоритма.  
5. Доп. комментарии приветствуются.

